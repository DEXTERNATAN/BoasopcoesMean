"use strict";var mongoose=require("mongoose"),express=require("express"),router=express.Router(),Model=mongoose.model("Task");module.exports=function(isLoggedIn){return router.get("/",isLoggedIn,function(req,res){Model.find(function(err,data){return err?res.status(500).send(err):0===data.length?res.send("0"):res.status(200).send(data)})}),router.post("/",isLoggedIn,function(req,res){var newData=new Model;Model.fillDoc(newData,req.body,function(err){return err?res.status(500).send(err):res.status(200).send(newData)})}),router.get("/:id",isLoggedIn,function(req,res){Model.findById(req.params.id,function(err,data){return err?res.status(500).send(err):data?res.status(200).send(data):res.status(404).end()})}),router.put("/:id",isLoggedIn,function(req,res){Model.findById(req.params.id,function(err,data){return err?res.status(500).send(err):data?void Model.fillDoc(data,req.body,function(err){return err?res.status(500).send(err):res.status(200).send(data)}):res.status(404).end()})}),router["delete"]("/:id",isLoggedIn,function(req,res){Model.findById(req.params.id,function(err,data){return err?res.status(500).send(err):data?void data.remove(function(err){return err?res.status(500).send(err):res.status(200).end()}):res.status(404).end()})}),router};