"use strict";var path=require("path"),fs=require("fs"),routesDir=fs.readdirSync(path.join(__dirname,"./routes")),authDir=fs.readdirSync(path.join(__dirname,"./auth")),isLoggedIn=function(req,res,next){req.isAuthenticated()?next():res.sendStatus(401)},ExpressRouter=function(app,passport){routesDir.forEach(function(filename){if(filename.indexOf(".js")>-1){var routename=filename.substr(0,filename.length-3);app.use("/"+routename,require("./routes/"+routename)(isLoggedIn))}}),authDir.forEach(function(filename){if(filename.indexOf(".js")>-1){var authname=filename.substr(0,filename.length-3);app.use("/",require("./auth/"+authname)(passport))}})};module.exports=ExpressRouter;